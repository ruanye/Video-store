/**
 * 加载钱包 个人的返利
 * @zxyuns
 * 2016-06-23
 *   state  1表示已提现，0表示未提现
 * userId=6
 */
var userId=LS.get(Constants.userId);


$(function(){
    loadCoupon();//过期
});

/**
 * 加载用户的基本信息
 */
function loadCoupon(){
    var notData = {
        pageNo:1,
        pageSize:9999,
        userId:userId//用户ID
    };
    $.ajax({
        url:Constants.hostIp+"weixin/userGainMoneyList",
        type: "post",
        data:notData,
        success:function(data, status, xhr){
            if(data.status==0){
                var list=data.list;
                $("#walletData").html("");
                var strHtml="";
                if(list.length&&list){
                    var allMoney=list[0].allMoney;
                    var nowMoney=list[0].nowMoney;
                }else{
                     allMoney=0;
                     nowMoney=0;
                }


                $("#allMoney").html(allMoney);
                $("#nowMoney").html(nowMoney);

                for(var i=0;i<list.length;i++){
                    var obj=list[i];
                    strHtml+='<li class="item-content">';
                   // strHtml+='<div class="item-media"><i class="icon icon-f7"></i></div>';
                    strHtml+='<div class="item-inner">';
                    strHtml+='<div class="item-media normal">';
                    strHtml+='<img src="'+obj.icon+'" width="54">';
                    strHtml+=' </div>';
                    if(obj.state==0){//1表示已提现，0表示未提现
                        strHtml+='<div class="item-title toLeft">'+obj.nickName+'</div>';
                        strHtml+='<div class="item-after">'+obj.money+'元</div>';
                    }else{
                        strHtml+='<div class="item-title toLeft">'+obj.nickName+'<span style="color: #a6ce38;padding-left: 4px;">已提现</span></div>';
                        strHtml+='<div class="item-after"><s>'+obj.money+'元</s></div>';
                    }


                    strHtml+='</div>';
                    strHtml+='</li>';
                    strHtml+='<div style="clear: both;"></div>';
                }
                $("#walletData").html(strHtml);
            }else{
                alert(data.msg);
            }
        }
    });
}





var EC = {
    init:function() {
        var uid = localStorage.getItem(Constants.userid);
        // var uid = 1;
        $('#carName').val(sessionStorage.ownerName||'')
        $('#carNumber').val(sessionStorage.lpn||'')
        //点击保存
        $(document).on('click', '.col-100', function () {
            var myreg = /^(((13[0-9]{1})|(15[0-9]{1})|(14[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/;
            var $name=$('#carName').val();//车主姓名
            var $tel=$('#carTel').val();//车主电话
            var $applicantName=$('#applicantName').val();//投保人姓名
            var $applicantNumber=$('#applicantNumber').val();//投保人电话
            var $ownID=$('#ownID').val();//车主身份证
            var $recognizeeName=$('#recognizeeName').val();//被保人姓名
            var $recognizeeNumber=$('#recognizeeNumber').val();//被保人电话

            if(!$name){
                $.alert('请输入车主姓名')
                return false;
            }
            if (!myreg.test($tel)){
                $.alert('请输入有效的车主手机号')
                return false;                
            }
            var ajaxData={
                userId:localStorage.userId,
                id:sessionStorage.vehicleId,
                lpn:sessionStorage.lpn,
                ownerName:$name,
                ownerNumber:$tel,
                applicantName:$applicantName,
                applicantNumber:$applicantNumber,
                ownID:$ownID,
                recognizeeName:$recognizeeName,
                recognizeeNumber:$recognizeeNumber
            }
            console.log(ajaxData);
            $.ajax({
                type: "post",
                url: Constants.hostIp + '/weixin/trade/commitVehicle',
                dataType: "json",
                data: ajaxData,
                success: function(data) {
                    console.log(data);
                    if(data.status==0){
                        location.href="select-set.html"
                    }else{
                        $.alert(data.msg)
                    }
                }.bind(this),
                error: function(err) {
                    console.log('err')
                }
            });
        });
        $.init();
    }
}

EC.init();

function checkNumberAndLetterInput(m_this, info) {
    if ($(m_this).val() == "") {
        return;
    }
    var reg = /^[0-9a-zA-Z]+$/;
    if ( !reg.test($(m_this).val()) ) {
        $.toast(info + "只能输入数字和字母");
        $(m_this).val("");
        return;
    }
    $(m_this).val($(m_this).val().toUpperCase());
}
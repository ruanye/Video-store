function togglePage(e){$(".page").removeClass("active"),$(".mask").removeClass("active"),$(".page"+e).addClass("active"),$(".page").removeClass("blur")}function toggleMask(e){$(".mask").removeClass("active"),$(".mask"+e).addClass("active"),$(".page").addClass("blur")}function loadData(){$.get(Config.hostUrl+"/promo-ex/myPieces/"+REQUEST.promoId,{phone:REQUEST.phone,uberId:REQUEST.uuid||REQUEST.phone},function(e){var a='<img src="images/bg.png" class="item">',s=[null,null,null,null];e.list=e.list||[],e.list.forEach(function(e,o){a+='<img src="images/'+e.promoExPieceId+'.png" >',s[e.pieceType-1]=e}),$(".page2 .items").html(a);var o="";s.forEach(function(e,a){o+=e?'<img src="images/'+e.promoExPieceId+'.min.png">':'<img src="images/wenhao.png">'}),$(".page2 .codes").html(o),$(".maskgo img").attr("src","images/go"+(e.list.length+1)+".png"),togglePage(2)})}var REQUEST=function(){var e=location.search,a=new Object;if(e.indexOf("?")!=-1){var s=e.substr(1);strs=s.split("&");for(var o=0;o<strs.length;o++)a[strs[o].split("=")[0]]=strs[o].split("=")[1]}return a}();Config={hostUrl:""},REQUEST.page&&togglePage(REQUEST.page),REQUEST.mask&&toggleMask(REQUEST.mask),$(".mask").on("click",function(){$(".mask").removeClass("active"),$(".page").removeClass("blur")}),$(".page1 .center,.page1 .top").on("click",function(){$(this).hasClass("disable")||(toggleMask("fetch"),$(this).addClass("disable"),$.post(Config.hostUrl+"/promo-ex/grab/"+REQUEST.phaseId,{phone:REQUEST.phone,uberId:REQUEST.uuid||REQUEST.phone},function(e){$(this).removeClass("disable"),0==e.errorCode?($(".maskget .circle").attr({src:"images/"+e.object.promoExPieceId+".min.png"}),toggleMask("get"),setTimeout(loadData,3e3)):loadData()}))}),$(".page2 .btn.go").on("click",function(){toggleMask("go")}),$(".page2 .btn.rule").on("click",function(){toggleMask("rule")}),"5775de176be3ff006af3fabd"==REQUEST.phaseId?loadData():togglePage(1);
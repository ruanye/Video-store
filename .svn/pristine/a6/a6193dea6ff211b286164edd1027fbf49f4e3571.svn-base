/**
 * Created by yanghc on 16/5/24.
 */
var Constants = {
    userid : "userId",
    openid : "openid",
    sourceURL: "sourceURL",
    errorInfo: "errorInfo",
    errorPage:"error.html",
    attendPage:"scancode.html",
    hostIp:"http://synsunny.parsec.com.cn/Dorado/",
    index:"index",
    isLicense:"isLicense" //是否是新车上牌 LS

};

var shareObject = {
    title : "车帮车险",
    link : "",
    icon: ""
};


/**
 * 获取URL请求参数
 * @param name
 * @returns
 */
function getQueryString(name) {
    var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if(r!=null)return  unescape(r[2]); return null;
}


/**
 * 判断是否需要验证
 * @param need  true是需要
 * @param sourceUrl 当前页面的名字
 */
function judgeNeedLogin(need, sourceUrl){
    if(need && LS.get(Constants.userId)  == null){
        LS.set(Constants.sourceURL, sourceUrl);
        location.href = "bind.html";
        return true;
    }else{
        return false;
    }
}

/**
 * 微信提示信息
 * @type {{}}
 * 使用方式: 复制html{
 *              <div id="pagemasker"></div>
                <div id="dialog">
                    <div class="dialog_head">提示</div>
                    <div class="dialog-content"></div>
                    <div class="dialog-footer">
                        <a href="javascript:X.boxClose();" class="dialog-btn">我知道了</a>
                    </div>
                </div>
 *          }
 *          复制样式{
 *                  #dialog { width:80%; margin: 0 auto; left:50%; overflow: hidden; border-radius: 4px; position:fixed; z-index:100000000 }
                    .dialog_head{background: #c61c1f; height: 25px; border-top-left-radius:4px; border-top-right-radius: 4px; line-height: 25px; text-align: center; color: #ffffff; font-size: 0.35rem;}
                    .dialog-content{ padding: 25px 20px; text-align: center; font-size: 0.35rem;}
                    .dialog-footer{ text-align: center; height: 35px; line-height: 35px; margin-bottom: 10px;}
                    .dialog-footer .dialog-btn{ border: 1px solid #c61c1f; border-radius: 4px; color: #c61c1f; padding: 5px 30px;}
*           }
 *          调用: X.boxShow(html,true);方法
 *          关闭:X.boxClose();方法
 */
var X ={};

X.boxMask = function (display) {
    var height = jQuery('body').height() + 'px';
    var width = jQuery(window).width() + 'px';
    jQuery('#pagemasker').css({
        'position': 'fixed',
        'z-index': '3000',
        'width': width,
        'height': height,
        'filter': 'alpha(opacity=0.5)',
        'opacity': 0.5,
        'top': 0,
        'left': 0,
        'background': '#CCCCCC',
        'display': display
    });
    jQuery('#dialog').css('display', display)
};
X.getXY = function () {
    var x, y;
    if (document.body.scrollTop) {
        x = document.body.scrollLeft;
        y = document.body.scrollTop
    } else {
        x = document.documentElement.scrollLeft;
        y = document.documentElement.scrollTop
    }
    return {
        x: x,
        y: y
    }
};
X.boxShow = function (innerHTML, mask) {
    var dialog = jQuery('#dialog');
    dialog.find(".dialog-content").html(innerHTML);
    if (mask) {
        X.boxMask('block')
    }
    var ew = dialog.get(0).scrollWidth;
    var ww = jQuery(window).width();
    var lt = (ww / 2 - ew / 2) + 'px';
    var wh = jQuery(window).height();
    var xy = X.getXY();
    var tp = (wh * 0.15 + xy.y) + 'px';
    dialog.css('background-color', '#FFF');
    dialog.css('left', lt);
    dialog.css('top', tp);
    dialog.css('z-index', 9999);
    dialog.css('display', 'block');
    dialog.css('color','#000000');
    return false
};

X.boxClose = function () {
    jQuery('#dialog').find(".dialog-content").html('');
    jQuery('#dialog').css('z-index', -9999);
    X.boxMask('none');
    return false
};

X.getRequest = function(url) {
    if(url == "")
        url = location.search; // 获取url中"?"符后的字串
    var theRequest = new Object();
    if (url.indexOf("?") != -1) {
        var str = url.substr(1);
        strs = str.split("&");
        for (var i = 0; i < strs.length; i++) {
            theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
        }
    }
    return theRequest;
};


//时间格式化函数
Date.prototype.format = function (format) {
    var o = {
        "M+": this.getMonth() + 1, //month
        "d+": this.getDate(), //day
        "h+": this.getHours(), //hour
        "m+": this.getMinutes(), //minute
        "s+": this.getSeconds(), //second
        "q+": Math.floor((this.getMonth() + 3) / 3), //quarter
        "S": this.getMilliseconds() //millisecond
    } ;
    if (/(y+)/.test(format)) format = format.replace(RegExp.$1,(this.getFullYear() + "").substr(4 - RegExp.$1.length));
    for (var k in o) if (new RegExp("(" + k + ")").test(format))format = format.replace(RegExp.$1,RegExp.$1.length == 1 ? o[k] :("00" + o[k]).substr(("" + o[k]).length));
    return format;
};

//变量
//数据类型
//条件判断
//循环
//API
//对象
//json
//弹窗
$.confirm = function(option) {
    option = $.extend({
        title: "提示",
        contentText: "这是一个提示框,点击去小关闭",
        submitText: "提交",
        submitClass: "btn-submit",
        cancleText: "取消",
        cancleClass: "btn-cancle",
        callback: function() {},
    }, option);
    var htmlString = '<div class="confirm-mask">' +
        '<div class="confirm-modal">' +
        '<div class="confirm-title">' + option.title + '</div>' +
        '<div class="confirm-body">' +
        '<div class="confirm-contet">' + option.contentText + '</div>' +
        '</div>' +
        '<div class="confirm-footer">' +
        '<div class="confirm-btn ' + option.cancleClass + '">' + option.cancleText + '</div>' +
        '<div class="confirm-btn ' + option.submitClass + '">' + option.submitText + '</div>' +
        '</div>' +
        '</div>' +
        '</div>';
    var $modal = $(htmlString);
    $modal.find(".confirm-btn").on("click", function() {
        var event = {
            index: $(this).index(),
        }
        $modal.remove();
        option.callback.call(this, event);
    })
    $("body").append($modal);
};

// 抽奖
var n = 0;
init();

function init() {
    moveToNext(1);
    $.confirm({
        title: "",
        contentText: "您是Uber新用户，是否现在注册？",
        submitText: "立即注册",
        callback: function(event) {
            switch (event.index) {
                case 0:
                    break;
                case 1:
                    alert(1);
                    break;
            }
        },
    });
}


function moveToNext(i) {
    var $target = $('#l' + (i % 10 + 1));
    $('.lottery-box .flex-1').removeClass('lotter-active');
    $target.addClass('lotter-active');
    n = i;
}

function startRun() {
    var randomNumber = Math.random(8) * 10; //随机生成0-10之间的数字
    randomNumber = Math.ceil(randomNumber) + 16; //+上一个20的基数
    var m = n;
    for (var i = m; i < randomNumber + m; i++) {
        setTimeout((function(i) {
            return function() {
                moveToNext(i);
            }
        })(i % 8), i * 50)
    }
}


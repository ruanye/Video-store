function togglePage(e){$(".page").removeClass("active"),$(".mask").removeClass("active"),$(".page"+e).addClass("active")}function toggleMask(e){$(".mask").removeClass("active"),$(".mask"+e).addClass("active")}var REQUEST=function(){var e=location.search,s=new Object;if(-1!=e.indexOf("?")){var o=e.substr(1);strs=o.split("&");for(var a=0;a<strs.length;a++)s[strs[a].split("=")[0]]=strs[a].split("=")[1]}return s}();Config={hostUrl:""},REQUEST.page&&togglePage(REQUEST.page),REQUEST.mask&&toggleMask(REQUEST.mask),$(function(){!function(){$(".page1 .start span").on("click",function(){$(this).html("<div>领取中...</div>"),$.post(Config.hostUrl+"/promo-ex/grab/"+REQUEST.phaseId,{phone:REQUEST.phone,uberId:REQUEST.uuid||REQUEST.phone},function(e){console.log(e),0!=e.errorCode||($(".mask1 .circle").attr({src:"images/jiagsaw/"+e.object.promoExPieceId+".min.png"}),toggleMask(1)),setTimeout(function(){$.get(Config.hostUrl+"/promo-ex/myPieces/"+REQUEST.promoId,{phone:REQUEST.phone,uberId:REQUEST.uuid||REQUEST.phone},function(e){console.log(e);var s='<img src="images/jiagsaw/bj.png" class="item">';(e.list||[]).forEach(function(e,o){s+='<img src="images/jiagsaw/'+e.promoExPieceId+'.png" class="item">',$(".page2 .codes .code").eq(e.pieceType-1).attr("src","images/jiagsaw/"+e.promoExPieceId+".code.png").addClass("active")}),$(".page2 .items").html(s),togglePage(2)}),$.get(Config.hostUrl+"/promo-ex/phases/"+REQUEST.phaseId,{},function(e){e.object.content||$(".page2 .btn.next").off("click").addClass("disable"),$(".page2 .btn.next .tips").html("<div><p>"+e.object.content+"</p></div>")})},0!=e.errorCode?0:2e3)})})}(),function(){$(".page2 .btn").on("click",function(){return $(this).find(".tips").hasClass("active")?($(".page2 .btn .tips").hide().removeClass("active"),!1):($(".page2 .btn .tips").hide().removeClass("active"),$(this).find(".tips").show().addClass("active"),!1)}),$(".page2").on("click",function(){$(".page2 .btn .tips").hide().removeClass("active")})}(),function(){$(".mask1 .btngo").on("click",function(){$.get(Config.hostUrl+"/promo-ex/myPieces/"+REQUEST.promoId,{phone:REQUEST.phone,uberId:REQUEST.uuid||REQUEST.phone},function(e){console.log(e);var s='<img src="images/jiagsaw/bj.png" class="item">';(e.list||[]).forEach(function(e,o){s+='<img src="images/jiagsaw/'+e.promoExPieceId+'.png" class="item">',$(".page2 .codes .code").eq(e.pieceType-1).attr("src","images/jiagsaw/"+e.promoExPieceId+".code.png").addClass("active")}),$(".page2 .items").html(s),togglePage(2)})})}()});
/*
 * Simple To Introduction
 *
 * TOP MENU JAVASCRIPT FILE
 *
 * @auther yanghc
 * @date 16/4/20
 * v 0.0.1
 * Copyright © 2016 重庆市秒差距科技有限公司. All Rights Reserved.
 */

var current = SS.get(Constant.current) == null ? "" : SS.get(Constant.current);
var isMenu = SS.get(Constant.isMenu) == null ? false : SS.get(Constant.isMenu);
var bookName = SS.get(Constant.bookName);//课程名称

var html ="<div class=\"header-title\">"+
                "<div class=\"content\" id=\"class-title\"></div>"+
            "</div>";


var _menu ="<div class=\"header-menu\">"+
        "<div class=\"logo\">"+
          "<img src=\"images/mycos_logo.png\" height=\"40\" width=\"180\" title=\"麦可思智能助教平台\"/>"+
          "<a href='admin/index.html' class=\"goto\">切换至课下系统</a>"+
        "</div>"+
        "<div class=\"menu "+(isMenu != "true" ? "hide" : "show")+"\">"+
            "<ul>"+
                "<li data-menu-id=\"05\"><a href=\"javascript:void(0);\" data-url=\"check-in.html\">签到</a></li>"+
                "<li data-menu-id=\"04\"><a href=\"javascript:void(0);\" data-url=\"course.html\">课件</a></li>"+
                "<li data-menu-id=\"02\"><a href=\"javascript:void(0);\" data-url=\"tests-push.html\">测试</a></li>"+
                "<li class=\"down_nav\" data-menu-id=\"03\"><a href=\"javascript:void(0);\">提问<div class=\"menu-arrow\"></div></a>"+
                    "<ul class='fadeInDown animated'>"+
                        "<li><a href=\"javascript:void(0);\" data-url=\"personal-questions.html\">个人提问</a></li>"+
                        "<li><a href=\"javascript:void(0);\" data-url=\"group-questions.html\">分组提问</a></li>"+
                        "<li><a href=\"javascript:void(0);\" data-url=\"answer.html\">抢&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;答</a></li>"+
                    "</ul>"+
                "</li>"+
                "<li data-menu-id=\"01\"><a href=\"javascript:void(0);\" data-url=\"member.html\">成员</a></li>"+
                "<div class=\"ribbon_wrap\">"+
                    "<div class=\"ribbon_rail\">"+
                        "<div></div>"+
                    "</div>"+
                "</div>"+
            "</ul>"+
        "</div>"+
    "</div>";

$("#header_menu").html(html);
$("#class-title").html(bookName);
$("#header_menu_fixed").html(_menu);


//绑定事件
$("#header_menu_fixed li").bind("click",function(){
    var data_id = $(this).attr("data-menu-id");
    SS.set(Constant.current,data_id);
    if($(this).hasClass("down_nav")){
        $(this).find("li").bind('click', function(event) {
            var href = $(this).find("a").attr("data-url");
            location.href = href;
        });
    }else{
        var href = $(this).find("a").attr("data-url");
        location.href = href;
    }
});
//选中样式
$("#header_menu_fixed").find("li").each(function(i,e){
    var data_id = $(this).attr("data-menu-id");
    if(current == data_id){
        $(this).addClass('active');
    }
});
